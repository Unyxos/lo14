¤#!/bin/bash
changement="false"
str=""
while read line
do
	if [ "$(echo -n $line)" == "@" ]
	then
		changement="false"	
		#echo $changement
		#appeler ici la fonction qui va bouger les fichiers dans les dossiers
		cd extraction
		
		for i in $str
		do
		
			if [ -f $i ]
			then
				echo $i
				mv $i $active_dir/$i
			fi
			
			if [ -d $i ]
			then 
				echo $i
				mv $i $active_dir/$i
			fi
			
		done
		
		cd ..
		echo "str : $str"
		str=""
	fi
	
	if [ $changement == "true" ]
	then
		#ici si la variable changement est à true on envoie le nom du fichier
		#dans la variable $str 
		str="$str $(echo $line | cut -d' ' -f1)"
		#echo "changement=true"
	fi
	
	if [ $(echo $line | cut -d' ' -f1) == "directory" ]
	then
		#ici si on se trouve sur une ligne qui commance par directory, elle va forcément indiquer
		#le nom du dossier et sa place dans l'arborescence
		#on vient donc récupérer le nom du dossier et le placer dans la variable $active_dir
		#sed 's/^.*\/\?\([A-Za-z0-9_]*\)\/$/a\1/'
		
		active_dir=$(echo $line | cut -d ' ' -f2)
		
		if [ $(echo $active_dir | sed 's/.*\(.\)$/\1/') == "/" ]
		then
			active_dir=$(echo $active_dir | sed 's/\(.*\).$/\1/')
		fi
		
		echo "dir : $active_dir"
		changement="true"
		#echo $changement
	fi
	
done < header
echo $str
